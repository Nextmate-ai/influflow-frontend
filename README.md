# Influflow Frontend - åŒé¡¹ç›®å…±äº«ä»“åº“

æœ¬ä»“åº“åŒ…å«ä¸¤ä¸ªç‹¬ç«‹ä½†å…±äº«åŸºç¡€è®¾æ–½çš„ Web åº”ç”¨:

## ğŸ¨ influxy - AI å†…å®¹åˆ›ä½œå¹³å°
é¢å‘ KOL/åˆ›ä½œè€…çš„æ™ºèƒ½å†™ä½œä¸åˆ†å‘å·¥å…·,æä¾›ä»è¯é¢˜æ´å¯Ÿã€è‰æ¡ˆç¡®è®¤ã€æµå¼ç”Ÿæˆã€ç¼–è¾‘ä¼˜åŒ–åˆ°å‘å¸ƒç®¡ç†çš„ä¸€ç«™å¼ä½“éªŒã€‚

## ğŸ¯ nextmate.fun - Web3 é¢„æµ‹å¸‚åœº
åŸºäºåŒºå—é“¾çš„é¢„æµ‹å¸‚åœºå¹³å°,ç”¨æˆ·å¯ä»¥åˆ›å»ºå¸‚åœºã€è´­ä¹°ä»½é¢ã€å‚ä¸é¢„æµ‹å¹¶è·å¾—æ”¶ç›Šã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### influxy
- ğŸ¤– **å¤šæ¨¡å¼ AI ç”Ÿæˆ**: Draft/Lite/Analysis ä¸‰ç§ç”Ÿæˆæ¨¡å¼
- ğŸ§­ **è¯é¢˜æ´å¯Ÿ**: è¶‹åŠ¿æ¨æ–‡æœç´¢ä¸çƒ­é—¨è¯é¢˜æ¨è
- ğŸ§  **æ€ç»´å¯¼å›¾**: å¯è§†åŒ–ç»“æ„ç¼–è¾‘,é©±åŠ¨é‡æ–°ç”Ÿæˆ
- âœï¸ **æ™ºèƒ½ç¼–è¾‘**: æ®µè½çº§ AI æ¶¦è‰² (TipTap/ProseMirror)
- ğŸ–¼ï¸ **é…å›¾ç®¡ç†**: æœ¬åœ°ä¸Šä¼ æˆ– AI ç”Ÿæˆ
- ğŸ” **æµå¼å¯¹è¯**: åŸºäº SSE çš„ç¨³å®šä¼šè¯
- ğŸ’³ **è®¢é˜…ç³»ç»Ÿ**: ç§¯åˆ†æ ¡éªŒã€å¥—é¤ç®¡ç†
- ğŸ”— **æ¨èç³»ç»Ÿ**: æ¨èç ç”Ÿæˆä¸å¥–åŠ±è¿½è¸ª

### nextmate.fun
- ğŸ² **é¢„æµ‹å¸‚åœº**: å®Œæ•´çš„å¸‚åœºåˆ›å»ºå’Œç®¡ç†æµç¨‹
- ğŸ”— **æ™ºèƒ½åˆçº¦**: Wagmi + Viem é›†æˆ
- ğŸ‘› **é’±åŒ…è®¤è¯**: Privy å»ä¸­å¿ƒåŒ–è®¤è¯
- ğŸ’° **äº¤æ˜“ç®¡ç†**: ä»½é¢äº¤æ˜“ã€æ”¶ç›Šé¢†å–ã€åˆ›ä½œè€…è´¹ç”¨
- ğŸ‘¥ **æƒé™ç®¡ç†**: æ“ä½œå‘˜è§’è‰²ä¸å¸‚åœºç®¡ç†
- ğŸ“Š **å‚ä¸å†å²**: ç”¨æˆ·å®Œæ•´çš„äº¤æ˜“è®°å½•

### å…±äº«åŸºç¡€
- ğŸ‘¤ **ç”¨æˆ·ä½“ç³»**: Supabase Auth (Twitter OAuth)
- ğŸ“¦ **API ä»£ç†**: Next.js API Route ç»Ÿä¸€ä»£ç†
- ğŸ“± **å“åº”å¼ UI**: Tailwind CSS + HeroUI + Framer Motion

---

## ğŸ§± æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Next.js 15** - App Router + React 19 + Turbopack
- **TypeScript 5** - Strict æ¨¡å¼

### çŠ¶æ€ä¸æ•°æ®
- **Zustand 5** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **TanStack Query 5** - å¼‚æ­¥æ•°æ®è·å–ä¸ç¼“å­˜
- **Jotai 2** - åŸå­åŒ–çŠ¶æ€ç®¡ç†

### Web3 (nextmate.fun)
- **Privy 3** - é’±åŒ…è®¤è¯ä¸ç®¡ç†
- **Wagmi 2** - React Hooks for Ethereum
- **Viem 2** - TypeScript Ethereum åº“
- **RainbowKit 2** - é’±åŒ…è¿æ¥ UI

### UI ä¸æ ·å¼
- **Tailwind CSS 3** - åŸå­åŒ– CSS
- **HeroUI 2** - React ç»„ä»¶åº“
- **Framer Motion 11** - åŠ¨ç”»åº“
- **Lucide React** - å›¾æ ‡åº“

### å¯Œæ–‡æœ¬ (influxy)
- **TipTap 2** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- **ProseMirror** - ç¼–è¾‘å™¨æ ¸å¿ƒ
- **Remark/Unified 11** - Markdown å¤„ç†

### å¯è§†åŒ–
- **ReactFlow 11** - æ€ç»´å¯¼å›¾
- **Recharts 2** - å›¾è¡¨åº“

### åç«¯é›†æˆ
- **Supabase 2** - è®¤è¯ã€æ•°æ®åº“ã€å­˜å‚¨
- **Stripe 18** - æ”¯ä»˜é›†æˆ (influxy)
- **@microsoft/fetch-event-source 2** - SSE æµå¼é€šä¿¡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
- Node.js â‰¥ 18 (æ¨è 20)
- PNPM 9

### 2. å®‰è£…ä¾èµ–
```bash
pnpm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local`:

```bash
# è¿è¡Œç¯å¢ƒ
NEXT_PUBLIC_ENV=local # local | test | production

# åç«¯ API
NEXT_PUBLIC_API_BASE_URL=https://influflow-api.up.railway.app

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_KEY=your_supabase_service_key  # ä»…æœåŠ¡ç«¯ä½¿ç”¨

# ç«™ç‚¹é…ç½®
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_EMAIL_AUTH_ENABLED=false
```

**é‡è¦æç¤º:**
- `local` ç¯å¢ƒ: è¯·æ±‚èµ° `/api/proxy` ä»£ç†åˆ°åç«¯
- `test/production` ç¯å¢ƒ: ç›´è¿ `NEXT_PUBLIC_API_BASE_URL`
- `SUPABASE_SERVICE_KEY` ä»…åœ¨ API Route ä½¿ç”¨,ä¸¥ç¦æš´éœ²åˆ°å®¢æˆ·ç«¯

### 4. æœ¬åœ°è¿è¡Œ
```bash
pnpm dev
```

è®¿é—® http://localhost:3000

---

## ğŸ§ª å¼€å‘è„šæœ¬

```bash
pnpm dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (Turbopack)
pnpm build        # ç”Ÿäº§æ„å»º
pnpm start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡
pnpm format       # æ ¼å¼åŒ–: prettier + lint + tsc
pnpm lint         # ESLint æ£€æŸ¥
pnpm tsc          # TypeScript ç±»å‹æ£€æŸ¥
```

æäº¤å‰ä¼šè‡ªåŠ¨è¿è¡Œ Husky + lint-staged æ ¼å¼åŒ–å’Œæ ¡éªŒã€‚

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
app/                      # Next.js App Router
  api/                    # API Routes
    agent/                # [influxy] SSE æµå¼ API
    twitter/              # [influxy] Twitter é›†æˆ
    upload/               # [influxy] æ–‡ä»¶ä¸Šä¼ 
    privy/                # [nextmate.fun] Privy é’±åŒ…é›†æˆ
    proxy/                # [å…±äº«] REST API ä»£ç†
    auth/                 # [å…±äº«] è®¤è¯å›è°ƒ
  home/                   # [influxy] é¦–é¡µ
  subscription/           # [influxy] è®¢é˜…ç®¡ç†
  referral/               # [influxy] æ¨èç³»ç»Ÿ
  launchpad/              # [nextmate.fun] é¢„æµ‹å¸‚åœº
  profile/                # [å…±äº«] ç”¨æˆ·èµ„æ–™

components/               # React ç»„ä»¶
  generation/             # [influxy] ç”Ÿæˆç¼–æ’
  Renderer/               # [influxy] å†…å®¹æ¸²æŸ“
  editorPro/              # [influxy] å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
  draft/                  # [influxy] è‰ç¨¿ç¡®è®¤
  trending/               # [influxy] è¯é¢˜è¶‹åŠ¿
  subscription/           # [influxy] è®¢é˜…ç»„ä»¶
  referral/               # [influxy] æ¨èç»„ä»¶
  launchpad/              # [nextmate.fun] é¢„æµ‹å¸‚åœºç»„ä»¶
  providers/              # [nextmate.fun] Privy Provider
  layout/                 # [å…±äº«] å¸ƒå±€ç»„ä»¶
  auth/                   # [å…±äº«] è®¤è¯ç»„ä»¶

hooks/                    # è‡ªå®šä¹‰ Hooks (31ä¸ª)
  [influxy] ç”Ÿæˆç›¸å…³      # 5ä¸ª
  [influxy] å†…å®¹ç®¡ç†      # 3ä¸ª
  [influxy] Twitter       # 5ä¸ª
  [influxy] èŠå¤©          # 1ä¸ª
  [nextmate.fun] é¢„æµ‹å¸‚åœº # 6ä¸ª
  [nextmate.fun] Web3     # 7ä¸ª
  [å…±äº«] å·¥å…·             # 4ä¸ª

lib/                      # æ ¸å¿ƒå·¥å…·åº“
  api/                    # API å®¢æˆ·ç«¯
  supabase/               # Supabase é›†æˆ
  contracts/              # [nextmate.fun] æ™ºèƒ½åˆçº¦
  markdown/               # [influxy] Markdown è§£æ
  stripe.ts               # [influxy] Stripe æ”¯ä»˜

stores/                   # Zustand çŠ¶æ€ç®¡ç†
  authStore.ts            # [å…±äº«] è®¤è¯çŠ¶æ€
  subscriptionStore.ts    # [influxy] è®¢é˜…çŠ¶æ€
  contentStore.ts         # [influxy] å†…å®¹ç¼–è¾‘
  articleStore.ts         # [influxy] æ–‡ç« çŠ¶æ€

types/                    # TypeScript ç±»å‹ (9ä¸ª)
services/                 # ä¸šåŠ¡æœåŠ¡å±‚
utils/                    # å·¥å…·å‡½æ•° (11ä¸ª)
config/                   # é…ç½®æ–‡ä»¶
constants/                # å¸¸é‡å®šä¹‰
```

---

## ğŸ§­ æ¶æ„è®¾è®¡

### API ä»£ç†ç­–ç•¥
- **æœ¬åœ°ç¯å¢ƒ**: è¯·æ±‚èµ° `/api/proxy/[...slug]` ä»£ç†,è§£å†³é•¿è€—æ—¶è¯·æ±‚è¶…æ—¶
- **ç”Ÿäº§ç¯å¢ƒ**: ç›´è¿åç«¯ API
- **SSE æµå¼**: `/api/agent/chat/stream` ä¸“ç”¨ä»£ç† (nodejs runtime)

### ç”Ÿæˆç¼–æ’ (influxy)
- `GenerationOrchestrator` ç»Ÿä¸€è°ƒåº¦ä¸¤é˜¶æ®µæµç¨‹
- è‰ç¨¿ç¡®è®¤ â†’ å†…å®¹ç”Ÿæˆ
- æ”¯æŒ Draft/Lite/Analysis ä¸‰ç§æ¨¡å¼

### çŠ¶æ€ç®¡ç†
- **Zustand**: å…¨å±€çŠ¶æ€ (è®¤è¯ã€è®¢é˜…ã€å†…å®¹)
- **React Query**: å¼‚æ­¥æ•°æ®ç¼“å­˜
- **401 è‡ªåŠ¨é‡è¯•**: Token åˆ·æ–°æœºåˆ¶
- **ç§¯åˆ†æ£€æµ‹**: `code=42000` è§¦å‘å¼¹çª—

### Web3 é›†æˆ (nextmate.fun)
- **Privy**: é’±åŒ…è®¤è¯
- **Wagmi**: æ™ºèƒ½åˆçº¦äº¤äº’
- **äº¤æ˜“ç®¡ç†**: Gasã€ç­¾åã€ç¡®è®¤è‡ªåŠ¨å¤„ç†

---

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

- âœ… `SUPABASE_SERVICE_KEY` ä»…åœ¨æœåŠ¡ç«¯ä½¿ç”¨
- âœ… API è¯·æ±‚è‡ªåŠ¨æºå¸¦ Supabase Token
- âœ… æ™ºèƒ½åˆçº¦è°ƒç”¨å‰æ£€æŸ¥ä½™é¢å’Œæˆæƒ
- âœ… ç”¨æˆ·è¾“å…¥ä½¿ç”¨ zod éªŒè¯
- âœ… OAuth å›è°ƒå¤±è´¥ç»Ÿä¸€å¤„ç†

---

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Vercel (æ¨è)
1. è¿æ¥ GitHub ä»“åº“
2. é…ç½®ç¯å¢ƒå˜é‡ (å¹³å° Secrets)
3. è‡ªåŠ¨æ„å»ºéƒ¨ç½²

### æ‰‹åŠ¨éƒ¨ç½²
```bash
pnpm build
pnpm start
```

**æ³¨æ„äº‹é¡¹:**
- SSE è·¯ç”±éœ€è¦ `nodejs` runtime
- ç¯å¢ƒå˜é‡é€šè¿‡å¹³å° Secret æ³¨å…¥
- `SUPABASE_SERVICE_KEY` ä¸¥ç¦æš´éœ²åˆ°å®¢æˆ·ç«¯

---

## ğŸ§° è°ƒè¯•å»ºè®®

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| ä»£ç†/è¶…æ—¶ | æœ¬åœ°ç¯å¢ƒç¡®ä¿ä½¿ç”¨ `/api/proxy` |
| Token è¿‡æœŸ | 401 è‡ªåŠ¨åˆ·æ–°,æ£€æŸ¥ Supabase é…ç½® |
| å›¾ç‰‡ä¸Šä¼  | æœ€å¤§ 10MB, ä½¿ç”¨ `SUPABASE_SERVICE_KEY` |
| ç§¯åˆ†ä¸è¶³ | `code=42000` è‡ªåŠ¨è§¦å‘å¼¹çª— |
| Web3 äº¤æ˜“å¤±è´¥ | æ£€æŸ¥é’±åŒ…ä½™é¢ã€æˆæƒçŠ¶æ€ |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. **åˆ†æ”¯è§„èŒƒ**: `feature/*`, `fix/*`, `chore/*`
2. **æäº¤è§„èŒƒ**: éµå¾ª Conventional Commits
3. **ä»£ç è´¨é‡**: è¿è¡Œ `pnpm format` å’Œ `pnpm tsc`
4. **é¡¹ç›®åŒºåˆ†**: æ ‡æ³¨æ˜¯ [influxy] è¿˜æ˜¯ [nextmate.fun] åŠŸèƒ½
5. **PR è¦æ±‚**: é™„ä¸ŠåŠŸèƒ½æˆªå›¾/å½•å±å’Œæµ‹è¯•è¯´æ˜

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **é¡¹ç›®æŒ‡å—**: [CLAUDE.md](./CLAUDE.md) - å®Œæ•´çš„é¡¹ç›®ç»“æ„å’Œå¼€å‘æŒ‡å—
- **nextmate.fun æ–‡æ¡£**:
  - [LAUNCHPAD_GUIDE.md](./LAUNCHPAD_GUIDE.md) - åŠŸèƒ½æŒ‡å—
  - [LAUNCHPAD_DESIGN_SYSTEM.md](./LAUNCHPAD_DESIGN_SYSTEM.md) - è®¾è®¡ç³»ç»Ÿ
  - [LAUNCHPAD_QUICK_REFERENCE.md](./LAUNCHPAD_QUICK_REFERENCE.md) - å¿«é€Ÿå‚è€ƒ

---

## ğŸ“ License

MIT License (å¦‚æ— ç‰¹åˆ«å£°æ˜)

---

**æœ€åæ›´æ–°**: 2025-11-30

**ç»´æŠ¤å»ºè®®**:
- ä¿®æ”¹ä»£ç æ—¶æ³¨æ„åŒºåˆ† influxy å’Œ nextmate.fun åŠŸèƒ½
- å…±äº«éƒ¨åˆ†ä¿®æ”¹éœ€åŒæ—¶æµ‹è¯•ä¸¤ä¸ªé¡¹ç›®
- å»ºè®®ä½¿ç”¨ä¸åŒ git åˆ†æ”¯å¼€å‘ä¸åŒé¡¹ç›®åŠŸèƒ½
